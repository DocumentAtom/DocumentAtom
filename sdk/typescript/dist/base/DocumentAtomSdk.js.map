{"version":3,"file":"DocumentAtomSdk.js","names":["_superagent","_interopRequireDefault","require","_SdkConfiguration","_SeverityEnum","_Logger","_TypeDetection","_ExtractAtom","_Helper","e","__esModule","default","_defineProperty","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","DocumentAtomSdk","constructor","endpoint","config","SdkConfiguration","TypeDetection","ExtractAtom","Helper","validateConnectivity","cancellationToken","Promise","resolve","reject","request","superagent","head","timeout","response","timeoutMs","abort","Logger","log","SeverityEnum","Debug","then","res","ok","catch","err","Warn","message","errorResponse","body","exports"],"sources":["../../src/base/DocumentAtomSdk.ts"],"sourcesContent":["import superagent from 'superagent';\nimport { SdkConfiguration } from './SdkConfiguration';\nimport { SeverityEnum } from '../enums/SeverityEnum';\nimport Logger from '../utils/Logger';\nimport TypeDetection from '../sdks/TypeDetection';\nimport ExtractAtom from '../sdks/ExtractAtom';\nimport Helper from '../utils/Helper';\n/**\n * Document Atom SDK class.\n * Extends the SdkBase class.\n * @module  DocumentAtomSdk\n * @extends SdkBase\n */\nexport default class DocumentAtomSdk {\n  public config: SdkConfiguration;\n  public TypeDetection: TypeDetection;\n  public ExtractAtom: ExtractAtom;\n  public Helper: Helper;\n  /**\n   * Instantiate the SDK.\n   * @param {string} endpoint - The endpoint URL.\n   */\n\n  constructor(endpoint: string = 'http://localhost:8000/') {\n    const config = new SdkConfiguration(endpoint);\n    this.config = config;\n    this.TypeDetection = new TypeDetection(config);\n    this.ExtractAtom = new ExtractAtom(config);\n    this.Helper = new Helper(config);\n  }\n\n  /**\n   * Validates API connectivity using a HEAD request.\n   * @param {AbortController} [cancellationToken] - Optional cancellation token for cancelling the request.\n   * @return {Promise<boolean>} Resolves to true if the connection is successful.\n   * @throws {Error} Rejects with the error in case of failure.\n   */\n  validateConnectivity(cancellationToken?: AbortController): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      const request = superagent.head(this.config.endpoint).timeout({ response: this.config.timeoutMs });\n      // If a cancelToken is provided, attach the abort method\n      if (cancellationToken) {\n        cancellationToken.abort = () => {\n          request.abort();\n          Logger.log(SeverityEnum.Debug, `Request aborted.`);\n        };\n      }\n      request\n        .then((res) => {\n          Logger.log(SeverityEnum.Debug, `Success reported from ${this.config.endpoint}`);\n          resolve(res.ok);\n        })\n        .catch((err) => {\n          Logger.log(SeverityEnum.Warn, `Failed to retrieve object from ${this.config.endpoint}: ${err.message}`);\n          const errorResponse = err?.response?.body || null;\n          if (errorResponse) {\n            reject(errorResponse);\n          } else {\n            reject(err.message ? err.message : err);\n          }\n        });\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]}